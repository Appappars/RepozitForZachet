# Исправление ошибки "failed to fetch" после деплоя

## Проблема
После деплоя на Railway при создании записи возникает ошибка "failed to fetch".

## Решение

### Что было исправлено:

1. **API клиент теперь использует относительные пути в production**
   - В production: `/api` (относительный путь)
   - В development: `http://localhost:5000/api`

2. **Улучшена настройка CORS на бэкенде**

3. **Исправлен порядок middleware** для правильного обслуживания статических файлов

### Что нужно сделать:

1. **Пересоберите и перезапустите приложение на Railway:**
   - Railway автоматически пересоберет проект при следующем push в GitHub
   - Или нажмите "Redeploy" в панели Railway

2. **Убедитесь, что build создается:**
   - Railway должен выполнить: `npm install && npm run build && cd server && npm install`
   - Затем запустить: `cd server && npm start`

3. **Проверьте логи:**
   - В панели Railway откройте "Deployments" → выберите последний деплой → "View Logs"
   - Убедитесь, что нет ошибок при сборке

### Если проблема сохраняется:

1. **Проверьте переменные окружения в Railway:**
   - `NODE_ENV=production` (должна быть установлена)
   - `PORT` (Railway установит автоматически)

2. **Проверьте консоль браузера:**
   - Откройте DevTools (F12) → Console
   - Посмотрите, какой URL используется для API запросов
   - Должен быть относительный путь `/api/records`, а не `http://localhost:5000/api/records`

3. **Проверьте Network tab:**
   - Откройте DevTools → Network
   - Попробуйте создать запись
   - Посмотрите на запрос - он должен идти на `/api/records`
   - Проверьте статус ответа (должен быть 201 для создания)

### Альтернативное решение (если фронтенд и бэкенд на разных доменах):

Если вы развернули фронтенд и бэкенд отдельно:

1. **В настройках Railway для фронтенда добавьте переменную:**
   ```
   REACT_APP_API_URL=https://your-backend.railway.app/api
   ```

2. **Пересоберите фронтенд** с этой переменной

### Проверка работы:

После исправления:
1. Откройте ваше приложение на Railway
2. Попробуйте создать новую запись
3. Проверьте, что запись создается без ошибок
4. Проверьте, что записи отображаются в списке

